(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&e(d)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();localStorage.getItem("darkmode");const _=document.createElement("label");_.classList.add("nav__toggle-switch__switch-label");const h=document.createElement("input");h.type="checkbox";h.classList.add("nav__toggle-switch__switch-label__checkbox");const N=document.createElement("span");N.classList.add("nav__toggle-switch__switch-label__slider");h.addEventListener("change",function(){document.body.classList.toggle("dark"),document.querySelector(".nav").classList.toggle("dark"),document.querySelector(".card").classList.toggle("dark"),document.querySelector(".card__search__text").classList.toggle("dark"),document.querySelector(".card__search__btn").classList.toggle("dark"),document.querySelectorAll(".container").forEach(t=>t.classList.toggle("dark")),document.querySelectorAll(".divWeek").forEach(t=>t.classList.toggle("dark"))});const j="XTre6o15g2JltNDK2c0yt2PFDYjwTTIWtRAfi9IL9NE",K=document.querySelector(".card__search"),V=document.querySelector(".card__search__text");let g,$=1;async function F(){try{const o=V.value,a=await fetch(`https://api.unsplash.com/search/photos?page=${$}&query=${o}&client_id=${j}`);if(!a.ok)throw new Error(`Network response was not ok: ${a.status}`);const i=await a.json(),e=i.results[0].id;g=document.createElement("div"),g.id=e;const t=i.results[0],s=document.createElement("img");s.classList.add("search-result__div__img"),s.src=t.urls.small,s.alt=t.alt_description,s.id=e,g.append(s)}catch(o){console.error(o)}}K.addEventListener("submit",function(o){o.preventDefault(),$=1,F()});function n(o,a){const i=document.createElement(o);return i.classList.add(a),i}async function D(){try{const a=document.querySelector(".card__search__text").value,i=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${a}&appid=5ae4efe85e0a37b88e4e2bcea85990bc&units=metric`);if(!i.ok)throw new Error(`Network response was not ok: ${i.status}`);const e=await i.json(),t=document.querySelector("main"),s=5,d=n("div","ensemble"),f=n("div","ensemble__divTitleImg"),L=n("div","ensemble__divWeek"),b=n("p","titleWeek");b.innerHTML=`Weather in ${a}:`,d.append(f),f.append(b),f.append(g);const k=n("div","chartContainer"),p=n("canvas","canvas");p.id="barCanvas",p.role="img",new Chart(p,{type:"line",data:{labels:[e.list[0*8].dt_txt,e.list[1*8].dt_txt,e.list[2*8].dt_txt,e.list[3*8].dt_txt,e.list[4*8].dt_txt],datasets:[{data:[e.list[0*8].main.temp,e.list[1*8].main.temp,e.list[2*8].main.temp,e.list[3*8].main.temp,e.list[4*8].main.temp],backgroundColor:["crimson"]}]},options:{scales:{y:{suggestedMax:50,ticks:{font:{size:18}}},x:{suggestedMax:5,ticks:{font:{size:18}}}}}});for(let r=0;r<s;r++){const H={year:"numeric",month:"long",day:"numeric"},l=n("div","container"),S=n("p","container__day");let W=e.list[r*8].dt_txt,E=new Date(W),O=E.toLocaleDateString(void 0,{weekday:"long"}),A=E.toLocaleDateString("fr-BE",{options:H});S.innerHTML=O+" "+A;const c=n("img","container__weatherimg");e.list[r*8].weather[0].description==="overcast clouds"||e.list[r*8].weather[0].description==="scattered clouds"?(c.src="assets/images/clouds.png",c.alt="weather logo"):e.list[r*8].weather[0].description==="broken clouds"||e.list[r*8].weather[0].description==="few clouds"?(c.src="assets/images/mist.png",c.alt="weather logo"):e.list[r*8].weather[0].description==="clear sky"?(c.src="assets/images/clear.png",c.alt="weather logo"):e.list[r*8].weather[0].description==="light snow"||e.list[r*8].weather[0].description==="snow"?(c.src="assets/images/snow.png",c.alt="weather logo"):(c.src="assets/images/drizzle.png",c.alt="weather logo");const x=n("h1","container__temp"),P=Math.round(e.list[r*8].main.temp);x.innerHTML=`${P}Â°C`;const M=n("h2","container__city");M.innerHTML=a;const w=n("div","container__infos"),m=n("div","container__infos__humidity"),y=n("img","container__infos__humidity__img");y.src="assets/images/humidity.png",y.alt="humidity logo";const T=n("p","container__infos__humidity__name");T.innerHTML="HUMIDITY";const q=n("p","container__infos__humidity__val");q.innerHTML=`${e.list[r*8].main.humidity}%`;const u=n("div","container__infos__wind"),v=n("img","container__infos__wind__img");v.src="assets/images/wind.png",v.alt="wind logo";const I=n("p","container__infos__wind__name");I.innerHTML="WIND";const C=n("p","container__infos__wind__val");let z=Math.round(e.list[r*8].wind.speed*3.6);C.innerHTML=`${z} km/h`,t.append(d),d.append(L),L.append(l),l.append(S),l.append(c),l.append(x),l.append(M),l.append(w),w.append(m),m.append(y),m.append(T),m.append(q),w.append(u),u.append(v),u.append(I),u.append(C)}t.append(k),k.append(p)}catch(o){console.error(o)}}document.addEventListener("DOMContentLoaded",function(){document.querySelector(".nav__toggle-switch").append(_),_.append(h),_.append(N),document.querySelector(".card__search__btn").addEventListener("click",D),document.addEventListener("keyup",function(i){i.key==="Enter"?D():console.log("Please press enter")})});
